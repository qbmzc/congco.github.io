---
title: 使用Dockerfile自定义镜像
date: 2022-08-05
categories:
  - Linux
tags:
  - docker
sticky: 1
prev: 031514.md
next:
---



<!-- more -->

## 什么是Dockerfile

Dockerfile 是附有构建 Docker 镜像说明的易于理解的文本文件。它囊括了用户在创建镜像时可以调用的所有命令。

我们可以使用 Dockerfile 创建自定义的镜像。可以通过 Docker Hub 分享的自定义 Docker 镜像。

[docker hub](https://hub.docker.com/)

- 拉取镜像

```shell
sudo docker pull nginx
```

- 运行

```shell
sudo docker run -it -d -p 8080:8080 nginx
```

## Dockerfile格式

1. FROM  ---设置容器基础镜像

```Dockerfile
# 22.04 指明版本号，如果没有则会设置为最新版本（latest）
FROM ubuntu:22.04
```

2. LABEL ---明确镜像的元数据信息的键值对

```Dockerfile
LABEL ENV="DEV"
```

3. RUN ---在基础镜像中执行指令并创建一个新层

```Dockerfile
RUN apt-get update
RUN apt-get install git
```

4. CMD ---容器启动后先执行的命令

```Dockerfile
CMD ["java","-jar","app.jar"]
```

## 清理缓存

```js
yarn cache clean



L7 Ingress
hls.itaimei.test.taimei.com
file.itaimei.test.taimei.com
```

## 安装依赖

```js
yarn install
```

## 参考

- [如何使用 Dockerfile 创建自定义 Docker 镜像](https://linux.cn/article-14896-1.html)
