---
title: 使用openpdf给PDF添加水印或文本
date: 2023-11-10
tags:
  -  openpdf
categories:
  -  Java
toc: true
---

使用openpdf替换itext给PDF添加水印和文本填充

<!-- more -->

## 依赖

```xml
<properties>
<java.version>1.8</java.version>
<openpdf.version>1.3.32</openpdf.version>
</properties>
<dependency>
    <groupId>com.github.librepdf</groupId>
    <artifactId>openpdf</artifactId>
    <version>${openpdf.version}</version>
</dependency>

<dependency>
    <groupId>com.github.librepdf</groupId>
    <artifactId>openpdf-fonts-extra</artifactId>
    <version>${openpdf.version}</version>
</dependency>
<dependency>
    <groupId>com.github.librepdf</groupId>
    <artifactId>pdf-toolbox</artifactId>
    <version>${openpdf.version}</version>
</dependency>
```
## 添加水印

```bash
package com.cong.openpdf.test.watermark;

import com.lowagie.text.pdf.BaseFont;
import com.lowagie.toolbox.plugins.watermarker.Watermarker;
import lombok.SneakyThrows;

import java.awt.*;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;

/**
 * @author cong
 * @since 2023/11/13 13:39
 */
public class WatermarkTest {

    @SneakyThrows
    public static void main(String[] args) {
        Path path = Paths.get("/Users/cong/Downloads/a.pdf");
        byte[] bytes = Files.readAllBytes(path);
        String text = "这是一个水印 \u25cf";
        int fontSize = 100;
        float opacity = 0.5f;
        BaseFont baseFont = BaseFont.createFont("/Users/cong/IdeaProjects/fs/fs-web/merge.ttf", BaseFont.IDENTITY_H, BaseFont.EMBEDDED);

        byte[] write = new Watermarker(bytes, text, fontSize, opacity).withColor(Color.GRAY)
                .withFont(baseFont)
                .write();
        System.out.println(write.length > bytes.length);
        writeOnDisk(write);
    }

    @SuppressWarnings("unused")
    private static void writeOnDisk(byte[] result) throws IOException {
        try (FileOutputStream fileOutputStream = new FileOutputStream("/Users/cong/Downloads/Result.pdf")) {
            fileOutputStream.write(result);
        }
    }
}

```

